<% content_for :body_class, "bg-gradient-to-b from-sky-400 via-sky-200 to-white" %>

<!-- Hero -->
<section class="relative flex-1 flex items-center justify-center">

  <!-- コンテンツ本体 -->
  <div class="relative text-center space-y-5">
    <h1 class="text-5xl md:text-7xl font-extrabold tracking-tight
                 bg-gradient-to-r from-indigo-400 via-fuchsia-400 to-pink-500
                 text-transparent bg-clip-text
                 animate-fade-up">
      Mochibe.
    </h1>

    <h2 class="text-base md:text-lg text-black/90 drop-shadow-sm
               animate-fade-up anim-delay-200">
      あなたのモチベーションを見つけよう
    </h2>

    <%= link_to "分析を始める",
            chat_session_path(@chat_session),
            class: "inline-flex items-center justify-center rounded-full
            px-6 py-3 text-sm font-semibold text-white bg-gradient-to-r
            from-indigo-400 via-purple-400 to-pink-500 hover:from-indigo-500
            hover:via-purple-500 hover:to-pink-600 transition shadow-md animate-fade-up anim-delay-400" %>
  </div>
</section>

<!-- 初心者マークアイコン（右下固定） + モーダル -->
<div class="fixed bottom-6 right-6 z-50" data-controller="modal">
  <!-- バッジ（初回のみ表示） -->
  <div data-modal-target="badge"
       class="absolute -top-3 left-1/2 -translate-x-1/2 bg-pink-500 text-white text-xs
              px-2 py-1 rounded-full whitespace-nowrap shadow-lg hidden z-10">
    初めての方
  </div>

  <!-- アイコンボタン -->
  <button data-action="click->modal#open"
          data-modal-target="button"
          class="bg-gradient-to-b from-sky-400 via-sky-200 to-white
                 hover:from-sky-500 hover:via-sky-300 hover:to-sky-50
                 text-white rounded-full p-4 shadow-lg transition-all hover:scale-110">
    <span class="text-3xl grayscale">🔰</span>
  </button>

  <!-- モーダル（dialog要素） -->
  <dialog data-modal-target="dialog"
          data-action="click->modal#clickOutside"
          class="backdrop:bg-black/50 rounded-lg p-0 max-w-4xl w-full max-h-[90vh]">
    <div class="bg-white rounded-lg flex flex-col max-h-[90vh]">
      <!-- ヘッダー -->
      <div class="flex justify-between items-center p-6 border-b flex-shrink-0">
        <h2 class="text-2xl font-bold text-transparent bg-clip-text
                   bg-gradient-to-r from-indigo-500 to-pink-500">
          🔰 使い方ガイド
        </h2>
        <button data-action="click->modal#close"
                class="text-gray-500 hover:text-gray-700 text-3xl leading-none">
          ×
        </button>
      </div>

      <!-- コンテンツ -->
      <div class="p-6 overflow-y-auto flex-1">
        <%= render "how_to_use_content" %>
      </div>

      <!-- フッター：「次回から表示しない」チェックボックス -->
      <div class="p-6 border-t bg-gray-50 flex-shrink-0">
        <label class="flex items-center gap-2 cursor-pointer">
          <input type="checkbox"
                 data-modal-target="dontShowAgain"
                 class="w-4 h-4 text-indigo-600 rounded focus:ring-2 focus:ring-indigo-500">
          <span class="text-sm text-gray-700">次回から自動で表示しない</span>
        </label>
      </div>
    </div>
  </dialog>
</div>

