  <!DOCTYPE html>
  <html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Mochibe.</title>

    <%# CSS: 既存のapplication + このページ用のtop_page.css を読み込む %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "top_page", "data-turbo-track": "reload" %>

    <%# JSは application.js にバンドルされるので layout 側で読み込んでいればOK %>
    <%# （もしlayoutで読み込んでないなら↓を一時的に追加）
        <%= javascript_include_tag "application", defer: true %>
  </head>
  <body class="min-h-screen flex flex-col">
    <div class="min-h-screen bg-gradient-to-br from-slate-400 via-slate-300 to-slate-200 flex items-center justify-center relative overflow-hidden">
      <!-- 雲レイヤー -->
      <div id="clouds-layer" class="absolute inset-0 z-10">
        <% [
          {cls: 'cloud-1 absolute -top-20 -left-20 w-96 h-64 bg-white/90'},
          {cls: 'cloud-2 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-48 bg-white/95 delay-100'},
          {cls: 'cloud-3 absolute -bottom-20 -right-20 w-72 h-44 bg-white/85 delay-200'},
          {cls: 'cloud-4 absolute top-1/4 right-1/4 w-40 h-24 bg-white/80 delay-400'},
          {cls: 'cloud-5 absolute bottom-1/4 left-1/3 w-32 h-20 bg-white/75 delay-600'}
        ].each do |cloud| %>
          <div class="<%= "#{cloud[:cls]} rounded-full blur-sm animate-cloud-float" %>"></div>
        <% end %>
      </div>

      <!-- 晴れた背景 -->
      <div id="clear-sky" class="absolute inset-0 
    bg-gradient-to-b from-sky-400 via-sky-200 to-blue-100
    opacity-0 transition-opacity duration-1500"></div>

      <!-- 太陽 -->
    <div id="sun" class="sun-circle absolute top-16 right-16 z-20 md:top-20 md:right-20"></div>

      <!-- メインタイトルセクション -->
      <div id="title-section" class="relative z-30 text-center opacity-0 px-4">
        <h1 id="main-title" class="text-5xl md:text-6xl lg:text-8xl bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-3 md:mb-4 animate-gradient">
          Mochibe.
        </h1>
        <p id="subtitle" class="text-base md:text-lg lg:text-xl text-gray-600 opacity-0 transition-all duration-800">
          あなたのモチベーションを見つけよう
        </p>

        <!-- ✅ CTA：分析を始める -->
        <div id="cta-wrap" class="mt-6 flex justify-center opacity-0 transition-opacity duration-700">
          <%= link_to "分析を始める",
                      (defined?(new_chat_session_path) ? new_chat_session_path : "/chat_sessions/new"),
                      class: "inline-flex items-center rounded-full bg-white px-6 py-3 text-purple-600 font-medium shadow-lg hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0 transition focus:outline-none focus-visible:ring-4 focus-visible:ring-purple-300" %>
        </div>
      </div>

      <!-- キラキラエフェクト -->
      <div id="sparkles-container" class="absolute inset-0 z-25 pointer-events-none">
        <% [
          {cls: 'sparkle-1 absolute top-1/3 left-1/4 text-yellow-400 text-2xl'},
          {cls: 'sparkle-2 absolute top-1/2 right-1/3 text-yellow-400 text-xl'},
          {cls: 'sparkle-3 absolute bottom-1/3 left-1/3 text-yellow-400 text-2xl'},
          {cls: 'sparkle-4 absolute top-3/4 right-1/4 text-yellow-300 text-sm'},
          {cls: 'sparkle-5 absolute top-1/4 left-2/3 text-yellow-400 text-base'}
        ].each do |sparkle| %>
          <div class="<%= "#{sparkle[:cls]} opacity-0" %>">
            <span class="inline-block">✨</span>
          </div>
        <% end %>
      </div>

      <!-- 浮遊装飾要素 -->
      <div id="floating-elements" class="absolute inset-0 z-20 pointer-events-none">
        <% [
          {cls: 'absolute top-[16%] left-[16%] w-4 h-4 bg-gradient-to-r from-blue-300 to-purple-400', anim: 'animate-float-gentle', delay: ''},
          {cls: 'absolute bottom-[16%] right-[16%] w-3 h-3 bg-gradient-to-r from-pink-300 to-yellow-400 delay-500', anim: 'animate-float-slow', delay: ''},
          {cls: 'absolute top-2/3 left-[8%] w-2 h-2 bg-gradient-to-r from-indigo-300 to-blue-400 delay-1000', anim: 'animate-float-fast', delay: ''},
          {cls: 'absolute top-[20%] right-1/3 w-3 h-3 bg-gradient-to-r from-green-300 to-teal-400 delay-1200', anim: 'animate-float-gentle', delay: 'animation-delay: 1s;'},
          {cls: 'absolute bottom-1/4 left-1/5 w-2 h-2 bg-gradient-to-r from-purple-300 to-pink-400 delay-1500', anim: 'animate-float-slow', delay: 'animation-delay: 2s;'}
        ].each do |el| %>
          <div class="<%= "#{el[:cls]} rounded-full opacity-0 transition-opacity duration-1000" %>">
            <div class="w-full h-full rounded-full <%= el[:anim] %>" style="<%= el[:delay] %>"></div>
          </div>
        <% end %>
          <div class="pointer-events-auto absolute bottom-6 left-1/2 -translate-x-1/2 z-40
                w-[min(96%,1100px)]">
            <%= render "shared/footer_card" %>
          </div>
      </div>
    </div>
  </body>
  </html>